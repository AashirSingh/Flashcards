(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7801],{7801:(X,E,C)=>{"use strict";C.r(E),C.d(E,{FlashcardPageModule:()=>W});var F=C(177),I=C(4341),o=C(4742),s=C(5171),t=C(3953),v=C(467);const h=["drawingCanvas"];let T=(()=>{var d;class y{constructor(c){this.modalController=c}ngAfterViewInit(){this.drawingCanvas&&(this.ctx=this.drawingCanvas.nativeElement.getContext("2d"),this.initializeCanvas())}initializeCanvas(){const c=this.drawingCanvas.nativeElement;this.ctx.strokeStyle="#ffffff",this.ctx.lineWidth=2;let _=!1;const G=L=>{if(!_)return;const j=c.getBoundingClientRect(),$=c.width/j.width*(L.clientX-j.left),Y=c.height/j.height*(L.clientY-j.top);this.ctx.lineTo($,Y),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo($,Y)};c.addEventListener("mousedown",L=>{_=!0,G(L)}),c.addEventListener("mouseup",()=>{_=!1,this.ctx.beginPath()}),c.addEventListener("mousemove",G)}submitDrawing(){const _=this.drawingCanvas.nativeElement.toDataURL();console.log("Submitting drawing:",_),this.dismiss()}clearCanvas(){this.ctx&&this.ctx.clearRect(0,0,this.drawingCanvas.nativeElement.width,this.drawingCanvas.nativeElement.height)}dismiss(){this.modalController.dismiss()}}return(d=y).\u0275fac=function(c){return new(c||d)(t.rXU(o.W3))},d.\u0275cmp=t.VBU({type:d,selectors:[["app-write-modal"]],viewQuery:function(c,_){if(1&c&&t.GBs(h,5),2&c){let w;t.mGM(w=t.lsd())&&(_.drawingCanvas=w.first)}},decls:19,vars:0,consts:[["drawingCanvas",""],["slot","end"],[3,"click"],[2,"width","100%","height","400px","border","1px solid #fff","background-color","black"],["size","6"],["expand","block","color","primary",3,"click"],["expand","block","color","light",3,"click"]],template:function(c,_){if(1&c){const w=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Write Answer"),t.k0s(),t.j41(4,"ion-buttons",1)(5,"ion-button",2),t.bIt("click",function(){return t.eBV(w),t.Njj(_.dismiss())}),t.EFF(6,"Close"),t.k0s()()()(),t.j41(7,"ion-content")(8,"ion-card")(9,"ion-card-content"),t.nrm(10,"canvas",3,0),t.k0s(),t.j41(12,"ion-row")(13,"ion-col",4)(14,"ion-button",5),t.bIt("click",function(){return t.eBV(w),t.Njj(_.submitDrawing())}),t.EFF(15,"Submit"),t.k0s()(),t.j41(16,"ion-col",4)(17,"ion-button",6),t.bIt("click",function(){return t.eBV(w),t.Njj(_.clearCanvas())}),t.EFF(18,"Clear"),t.k0s()()()()()}},dependencies:[o.Jm,o.QW,o.b_,o.I9,o.hU,o.W9,o.eU,o.ln,o.BC,o.ai]}),y})();var g=C(5677),p=C(1346);function k(d,y){if(1&d){const f=t.RV6();t.j41(0,"ion-button",3),t.bIt("click",function(){t.eBV(f);const _=t.XpG();return t.Njj(_.playSound())}),t.EFF(1,"Play Sound"),t.k0s()}}function e(d,y){if(1&d){const f=t.RV6();t.j41(0,"ion-card",8),t.bIt("click",function(){t.eBV(f);const _=t.XpG();return t.Njj(_.toggleAnswer())}),t.j41(1,"div",9)(2,"div",10)(3,"div",11)(4,"ion-card-header")(5,"ion-card-title",12),t.EFF(6),t.k0s()()(),t.j41(7,"div",13)(8,"ion-card-header")(9,"ion-card-title",12),t.EFF(10),t.k0s()()()()()()}if(2&d){const f=t.XpG();t.R7$(2),t.AVh("flip",f.showAnswer),t.R7$(4),t.JRh(f.questions[f.currentQuestionIndex].question),t.R7$(4),t.JRh(f.questions[f.currentQuestionIndex].answer)}}function n(d,y){if(1&d){const f=t.RV6();t.j41(0,"ion-row")(1,"ion-col",14)(2,"ion-button",15),t.bIt("click",function(){t.eBV(f);const _=t.XpG();return t.Njj(_.previousQuestion())}),t.nrm(3,"ion-icon",16),t.EFF(4," Previous "),t.k0s()(),t.j41(5,"ion-col",14)(6,"ion-button",17),t.bIt("click",function(){t.eBV(f);const _=t.XpG();return t.Njj(_.nextQuestion())}),t.EFF(7," Next "),t.nrm(8,"ion-icon",18),t.k0s()()()}if(2&d){const f=t.XpG();t.R7$(2),t.Y8G("disabled",0===f.currentQuestionIndex),t.R7$(4),t.Y8G("disabled",f.currentQuestionIndex>=f.questions.length-1)}}function r(d,y){1&d&&(t.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),t.EFF(3,"No questions available for this course."),t.k0s()()())}let i=(()=>{var d;class y{constructor(c,_){this.configService=c,this.modalController=_,this.questions=[],this.currentQuestionIndex=0,this.showAnswer=!1,this.isReadMode=!0,this.isSanskritCourse=!1}ngOnInit(){this.configService.getCourses().subscribe(c=>{const _=c.find(w=>w.id===+this.courseId);_&&_.components.practice?(this.questions=_.components.practice.questions,console.log("Questions loaded:",this.questions),"sanskrit"===_.name.toLowerCase()&&(this.isSanskritCourse=!0,this.loadSound())):(console.error("No data found for course:",this.courseId),this.questions=[])})}loadSound(){this.sound=new g.Howl({src:"/Users/aashirsingh/Documents/FlashcardProject/Flashcards/src/assets/sounds/420917__livepiano__01c0_om-elo.wav"})}playSound(){this.sound&&this.sound.play()}switchToReadMode(){this.isReadMode=!0}openWriteModal(){var c=this;return(0,v.A)(function*(){return yield(yield c.modalController.create({component:T})).present()})()}nextQuestion(){this.currentQuestionIndex<this.questions.length-1&&(this.currentQuestionIndex++,this.showAnswer=!1)}previousQuestion(){this.currentQuestionIndex>0&&(this.currentQuestionIndex--,this.showAnswer=!1)}toggleAnswer(){this.showAnswer=!this.showAnswer}}return(d=y).\u0275fac=function(c){return new(c||d)(t.rXU(p.w),t.rXU(o.W3))},d.\u0275cmp=t.VBU({type:d,selectors:[["app-practice"]],inputs:{courseId:"courseId"},decls:14,vars:7,consts:[[3,"translucent"],["slot","end"],["color","primary",3,"click","disabled"],["color","primary",3,"click"],["color","primary",3,"click",4,"ngIf"],[3,"fullscreen"],["class","card-flip",3,"click",4,"ngIf"],[4,"ngIf"],[1,"card-flip",3,"click"],[1,"flip-container"],[1,"flip"],[1,"card-front"],[1,"ion-text-center"],[1,"card-back"],["size","6"],["expand","block","color","medium",3,"click","disabled"],["slot","start","name","arrow-back"],["expand","block",3,"click","disabled"],["slot","end","name","arrow-forward"]],template:function(c,_){1&c&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Practice"),t.k0s(),t.j41(4,"ion-buttons",1)(5,"ion-button",2),t.bIt("click",function(){return _.switchToReadMode()}),t.EFF(6,"Read"),t.k0s(),t.j41(7,"ion-button",3),t.bIt("click",function(){return _.openWriteModal()}),t.EFF(8,"Write"),t.k0s(),t.DNE(9,k,2,0,"ion-button",4),t.k0s()()(),t.j41(10,"ion-content",5),t.DNE(11,e,11,4,"ion-card",6)(12,n,9,2,"ion-row",7)(13,r,4,0,"ion-card",7),t.k0s()),2&c&&(t.Y8G("translucent",!0),t.R7$(5),t.Y8G("disabled",_.isReadMode),t.R7$(4),t.Y8G("ngIf",_.isSanskritCourse),t.R7$(),t.Y8G("fullscreen",!0),t.R7$(),t.Y8G("ngIf",_.questions.length>0),t.R7$(),t.Y8G("ngIf",_.questions.length>0),t.R7$(),t.Y8G("ngIf",0===_.questions.length))},dependencies:[F.bT,o.Jm,o.QW,o.b_,o.ME,o.tN,o.hU,o.W9,o.eU,o.iq,o.ln,o.BC,o.ai],styles:[".card-flip[_ngcontent-%COMP%]{perspective:1000px}.card-flip[_ngcontent-%COMP%]   .flip-container[_ngcontent-%COMP%]{position:relative;width:100%;height:300px}.card-flip[_ngcontent-%COMP%]   .flip[_ngcontent-%COMP%]{transition:transform .6s;transform-style:preserve-3d;width:100%;height:100%}.card-flip[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%], .card-flip[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]{-webkit-backface-visibility:hidden;backface-visibility:hidden;position:absolute;top:0;left:0;width:100%;height:100%}.card-flip[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.card-flip[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]{transform:rotateY(180deg);display:flex;align-items:center;justify-content:center}.card-flip[_ngcontent-%COMP%]   .flip.flip[_ngcontent-%COMP%]{transform:rotateY(180deg)}"]}),y})(),l=(()=>{var d;class y{constructor(){}}return(d=y).\u0275fac=function(c){return new(c||d)},d.\u0275dir=t.FsC({type:d,selectors:[["","base",""]],inputs:{courseId:"courseId"}}),y})();function u(d,y){if(1&d&&(t.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),t.EFF(3),t.k0s()(),t.j41(4,"ion-card-content")(5,"p"),t.EFF(6),t.k0s()()()),2&d){const f=y.$implicit;t.R7$(3),t.JRh(f.question),t.R7$(3),t.JRh(f.answer)}}function a(d,y){if(1&d&&(t.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),t.EFF(3,"Study Materials"),t.k0s()(),t.DNE(4,u,7,2,"ion-card",1),t.k0s()),2&d){const f=t.XpG();t.R7$(4),t.Y8G("ngForOf",f.studyMaterials)}}function m(d,y){1&d&&(t.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),t.EFF(3,"No study materials available for this course."),t.k0s()()())}let A=(()=>{var d;class y extends l{constructor(c){super(),this.configService=c,this.studyMaterials=[],this.audio=new Audio}ngOnInit(){this.configService.getCourses().subscribe(c=>{const _=c.find(w=>w.id===+this.courseId);_&&_.components.study?(this.studyMaterials=_.components.study.questions,this.playSound("/assets/sounds/study-material.mp3"),console.log("Study materials loaded:",this.studyMaterials)):(console.error("No data found for course:",this.courseId),this.studyMaterials=[])})}playSound(c){this.audio.src=c,this.audio.load(),this.audio.play()}}return(d=y).\u0275fac=function(c){return new(c||d)(t.rXU(p.w))},d.\u0275cmp=t.VBU({type:d,selectors:[["app-study"]],features:[t.Vt3],decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(c,_){1&c&&t.DNE(0,a,5,1,"ion-card",0)(1,m,4,0,"ion-card",0),2&c&&(t.Y8G("ngIf",_.studyMaterials.length>0),t.R7$(),t.Y8G("ngIf",0===_.studyMaterials.length))},dependencies:[F.Sq,F.bT,o.b_,o.I9,o.ME,o.tN]}),y})();function x(d,y){1&d&&(t.j41(0,"div",3),t.nrm(1,"ion-icon",5),t.j41(2,"h3"),t.EFF(3,"Congratulations, you passed!"),t.k0s()())}function M(d,y){1&d&&(t.j41(0,"div",3)(1,"h3"),t.EFF(2,"Better luck next time!"),t.k0s()())}let P=(()=>{var d;class y{constructor(c){this.modalCtrl=c,this.correctAnswers=0,this.totalQuestions=0}ngOnInit(){this.passedQuiz()&&console.log("Quiz passed!")}passedQuiz(){return this.correctAnswers/this.totalQuestions>=.7}dismiss(){this.modalCtrl.dismiss()}}return(d=y).\u0275fac=function(c){return new(c||d)(t.rXU(o.W3))},d.\u0275cmp=t.VBU({type:d,selectors:[["app-quiz-results"]],inputs:{correctAnswers:"correctAnswers",totalQuestions:"totalQuestions"},decls:14,vars:4,consts:[["slot","end"],[3,"click"],[1,"ion-padding"],[1,"ion-text-center"],["class","ion-text-center",4,"ngIf"],["name","trophy","color","warning",2,"font-size","48px"]],template:function(c,_){1&c&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Quiz Results"),t.k0s(),t.j41(4,"ion-buttons",0)(5,"ion-button",1),t.bIt("click",function(){return _.dismiss()}),t.EFF(6,"Close"),t.k0s()()()(),t.j41(7,"ion-content",2)(8,"h2",3),t.EFF(9,"Quiz Completed!"),t.k0s(),t.j41(10,"p",3),t.EFF(11),t.k0s(),t.DNE(12,x,4,0,"div",4)(13,M,3,0,"div",4),t.k0s()),2&c&&(t.R7$(11),t.Lme(" You got ",_.correctAnswers," out of ",_.totalQuestions," questions correct. "),t.R7$(),t.Y8G("ngIf",_.passedQuiz()),t.R7$(),t.Y8G("ngIf",!_.passedQuiz()))},dependencies:[F.bT,o.Jm,o.QW,o.W9,o.eU,o.iq,o.BC,o.ai]}),y})();function R(d,y){if(1&d&&(t.j41(0,"ion-item")(1,"ion-label"),t.EFF(2),t.k0s(),t.nrm(3,"ion-radio",8),t.k0s()),2&d){const f=y.$implicit,c=t.XpG(2);t.R7$(2),t.JRh(f),t.R7$(),t.Y8G("value",f)("disabled",c.selectionLocked)}}function B(d,y){if(1&d&&(t.j41(0,"ion-label",3),t.EFF(1),t.k0s()),2&d){const f=t.XpG(2);t.R7$(),t.SpI(" ",f.isCorrect()?"Correct!":"Incorrect, the correct answer is: "+f.correctAnswer," ")}}function b(d,y){if(1&d){const f=t.RV6();t.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title",3),t.EFF(3),t.k0s()(),t.j41(4,"ion-list")(5,"ion-radio-group",4),t.mxI("ngModelChange",function(_){t.eBV(f);const w=t.XpG();return t.DH7(w.selectedOption,_)||(w.selectedOption=_),t.Njj(_)}),t.bIt("ionChange",function(_){t.eBV(f);const w=t.XpG();return t.Njj(w.selectOption(_))}),t.DNE(6,R,4,3,"ion-item",5),t.k0s()(),t.j41(7,"ion-button",6),t.bIt("click",function(){t.eBV(f);const _=t.XpG();return t.Njj(_.nextQuestion())}),t.EFF(8,"Next"),t.k0s(),t.DNE(9,B,2,1,"ion-label",7),t.k0s()}if(2&d){const f=t.XpG();t.R7$(3),t.JRh(f.questions[f.currentQuestionIndex].question),t.R7$(2),t.R50("ngModel",f.selectedOption),t.R7$(),t.Y8G("ngForOf",f.options),t.R7$(),t.Y8G("disabled",!f.selectedOption),t.R7$(2),t.Y8G("ngIf",f.selectionLocked)}}function Q(d,y){1&d&&(t.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),t.EFF(3,"No questions available for this course."),t.k0s()()())}let D=(()=>{var d;class y{constructor(c,_){this.configService=c,this.modalCtrl=_,this.questions=[],this.currentQuestionIndex=0,this.options=[],this.selectedOption="",this.correctAnswer="",this.selectionLocked=!1,this.correctAnswersCount=0,this.audio=new Audio}ngOnInit(){this.loadQuestions()}loadQuestions(){this.configService.getCourses().subscribe(c=>{const _=c.find(w=>w.id===+this.courseId);_&&_.components.practice&&(this.questions=_.components.practice.questions,this.loadOptions())})}loadOptions(){this.questions.length>0&&(this.correctAnswer=this.questions[this.currentQuestionIndex].answer,this.options=this.generateOptions(this.correctAnswer),this.selectionLocked=!1)}generateOptions(c){const S=this.questions.map(G=>G.answer).filter(G=>G!==c).slice(0,3);return this.shuffleArray([c,...S])}shuffleArray(c){for(let _=c.length-1;_>0;_--){const w=Math.floor(Math.random()*(_+1));[c[_],c[w]]=[c[w],c[_]]}return c}selectOption(c){this.selectedOption=c.detail.value,this.selectionLocked=!0,this.isCorrect()?this.playSound("/assets/sounds/correct-answer.mp3"):this.playSound("/assets/sounds/wrong-answer.mp3")}nextQuestion(){this.selectedOption===this.correctAnswer&&this.correctAnswersCount++,this.currentQuestionIndex<this.questions.length-1?(this.currentQuestionIndex++,this.selectedOption="",this.loadOptions(),this.playSound("/assets/sounds/next-question.mp3")):this.showResults()}isCorrect(){return this.selectedOption===this.correctAnswer}showResults(){var c=this;return(0,v.A)(function*(){yield(yield c.modalCtrl.create({component:P,componentProps:{correctAnswers:c.correctAnswersCount,totalQuestions:c.questions.length}})).present()})()}playSound(c){this.audio.src=c,this.audio.load(),this.audio.play()}}return(d=y).\u0275fac=function(c){return new(c||d)(t.rXU(p.w),t.rXU(o.W3))},d.\u0275cmp=t.VBU({type:d,selectors:[["app-quiz"]],inputs:{courseId:"courseId"},decls:7,vars:4,consts:[[3,"translucent"],[3,"fullscreen"],[4,"ngIf"],[1,"ion-text-center"],[3,"ngModelChange","ionChange","ngModel"],[4,"ngFor","ngForOf"],["expand","block","color","primary",3,"click","disabled"],["class","ion-text-center",4,"ngIf"],["slot","start",3,"value","disabled"]],template:function(c,_){1&c&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Quiz"),t.k0s()()(),t.j41(4,"ion-content",1),t.DNE(5,b,10,5,"ion-card",2)(6,Q,4,0,"ion-card",2),t.k0s()),2&c&&(t.Y8G("translucent",!0),t.R7$(4),t.Y8G("fullscreen",!0),t.R7$(),t.Y8G("ngIf",_.questions.length>0),t.R7$(),t.Y8G("ngIf",0===_.questions.length))},dependencies:[F.Sq,F.bT,I.BC,I.vS,o.Jm,o.b_,o.ME,o.tN,o.W9,o.eU,o.uz,o.he,o.nf,o.KO,o.f0,o.BC,o.ai,o.Je],styles:[".card-flip[_ngcontent-%COMP%]{perspective:1000px}.card-flip[_ngcontent-%COMP%]   .flip-container[_ngcontent-%COMP%]{position:relative;width:100%;height:300px}.card-flip[_ngcontent-%COMP%]   .flip[_ngcontent-%COMP%]{transition:transform .6s;transform-style:preserve-3d;width:100%;height:100%}.card-flip[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%], .card-flip[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]{-webkit-backface-visibility:hidden;backface-visibility:hidden;position:absolute;top:0;left:0;width:100%;height:100%}.card-flip[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.card-flip[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]{transform:rotateY(180deg);display:flex;align-items:center;justify-content:center}.card-flip[_ngcontent-%COMP%]   .flip.flip[_ngcontent-%COMP%]{transform:rotateY(180deg)}"]}),y})(),V=(()=>{var d;class y{constructor(c){this.resolver=c}loadComponent(c,_){const w=this.resolver.resolveComponentFactory(c);_.clear();const S=_.createComponent(w);return console.log("Component loaded:",S.instance),S}}return(d=y).\u0275fac=function(c){return new(c||d)(t.KVO(t.OM3))},d.\u0275prov=t.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),y})();const H=["loadComponentHere"],q=[{path:":mode/:courseId",component:(()=>{var d;class y{constructor(c,_){this.route=c,this.loaderService=_}ngOnInit(){this.route.params.subscribe(c=>{const _=c.mode,w=c.courseId;console.log("Routing params:",_,w),this.loadComponent(_,w)})}loadComponent(c,_){let w;if("practice"===c?w=i:"study"===c?w=A:"quiz"===c&&(w=D),this.entry&&w){const S=this.loaderService.loadComponent(w,this.entry);S&&(S.instance.courseId=_,console.log("Course ID set in component:",S.instance.courseId))}else console.error("ViewContainerRef is not initialized or component is undefined")}}return(d=y).\u0275fac=function(c){return new(c||d)(t.rXU(s.nX),t.rXU(V))},d.\u0275cmp=t.VBU({type:d,selectors:[["app-flashcard"]],viewQuery:function(c,_){if(1&c&&t.GBs(H,7,t.c1b),2&c){let w;t.mGM(w=t.lsd())&&(_.entry=w.first)}},decls:3,vars:0,consts:[["loadComponentHere",""]],template:function(c,_){1&c&&(t.j41(0,"ion-content"),t.eu8(1,null,0),t.k0s())},dependencies:[o.W9]}),y})()}];let N=(()=>{var d;class y{}return(d=y).\u0275fac=function(c){return new(c||d)},d.\u0275mod=t.$C({type:d}),d.\u0275inj=t.G2t({imports:[s.iI.forChild(q),s.iI]}),y})(),W=(()=>{var d;class y{}return(d=y).\u0275fac=function(c){return new(c||d)},d.\u0275mod=t.$C({type:d}),d.\u0275inj=t.G2t({imports:[F.MD,I.YN,o.bv,N]}),y})()},5677:(X,E)=>{var F;!function(){"use strict";var I=function(){this.init()};I.prototype={init:function(){var e=this||o;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var n=this||o;if(e=parseFloat(e),n.ctx||k(),typeof e<"u"&&e>=0&&e<=1){if(n._volume=e,n._muted)return n;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e,o.ctx.currentTime);for(var r=0;r<n._howls.length;r++)if(!n._howls[r]._webAudio)for(var i=n._howls[r]._getSoundIds(),l=0;l<i.length;l++){var u=n._howls[r]._soundById(i[l]);u&&u._node&&(u._node.volume=u._volume*e)}return n}return n._volume},mute:function(e){var n=this||o;n.ctx||k(),n._muted=e,n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e?0:n._volume,o.ctx.currentTime);for(var r=0;r<n._howls.length;r++)if(!n._howls[r]._webAudio)for(var i=n._howls[r]._getSoundIds(),l=0;l<i.length;l++){var u=n._howls[r]._soundById(i[l]);u&&u._node&&(u._node.muted=!!e||u._muted)}return n},stop:function(){for(var e=this||o,n=0;n<e._howls.length;n++)e._howls[n].stop();return e},unload:function(){for(var e=this||o,n=e._howls.length-1;n>=0;n--)e._howls[n].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,k()),e},codecs:function(e){return(this||o)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{typeof(new Audio).oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||o,n=null;try{n=typeof Audio<"u"?new Audio:null}catch{return e}if(!n||"function"!=typeof n.canPlayType)return e;var r=n.canPlayType("audio/mpeg;").replace(/^no$/,""),i=e._navigator?e._navigator.userAgent:"",l=i.match(/OPR\/(\d+)/g),u=l&&parseInt(l[0].split("/")[1],10)<33,a=-1!==i.indexOf("Safari")&&-1===i.indexOf("Chrome"),m=i.match(/Version\/(.*?) /),A=a&&m&&parseInt(m[1],10)<15;return e._codecs={mp3:!(u||!r&&!n.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!r,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(n.canPlayType('audio/wav; codecs="1"')||n.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(n.canPlayType("audio/x-m4b;")||n.canPlayType("audio/m4b;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(A||!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(A||!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||o;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&44100!==e.ctx.sampleRate&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var n=function(r){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var i=new Audio;i._unlocked=!0,e._releaseHtml5Audio(i)}catch{e.noAudio=!0;break}for(var l=0;l<e._howls.length;l++)if(!e._howls[l]._webAudio)for(var u=e._howls[l]._getSoundIds(),a=0;a<u.length;a++){var m=e._howls[l]._soundById(u[a]);m&&m._node&&!m._node._unlocked&&(m._node._unlocked=!0,m._node.load())}e._autoResume();var A=e.ctx.createBufferSource();A.buffer=e._scratchBuffer,A.connect(e.ctx.destination),typeof A.start>"u"?A.noteOn(0):A.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),A.onended=function(){A.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0),document.removeEventListener("click",n,!0),document.removeEventListener("keydown",n,!0);for(var x=0;x<e._howls.length;x++)e._howls[x]._emit("unlock")}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),document.addEventListener("click",n,!0),document.addEventListener("keydown",n,!0),e}},_obtainHtml5Audio:function(){var e=this||o;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var n=(new Audio).play();return n&&typeof Promise<"u"&&(n instanceof Promise||"function"==typeof n.then)&&n.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var n=this||o;return e._unlocked&&n._html5AudioPool.push(e),n},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&!(typeof e.ctx.suspend>"u")&&o.usingWebAudio){for(var n=0;n<e._howls.length;n++)if(e._howls[n]._webAudio)for(var r=0;r<e._howls[n]._sounds.length;r++)if(!e._howls[n]._sounds[r]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var i=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(i,i)}},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&!(typeof e.ctx.resume>"u")&&o.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var o=new I,s=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};s.prototype={init:function(e){var n=this;return o.ctx||k(),n._autoplay=e.autoplay||!1,n._format="string"!=typeof e.format?e.format:[e.format],n._html5=e.html5||!1,n._muted=e.mute||!1,n._loop=e.loop||!1,n._pool=e.pool||5,n._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,n._rate=e.rate||1,n._sprite=e.sprite||{},n._src="string"!=typeof e.src?e.src:[e.src],n._volume=void 0!==e.volume?e.volume:1,n._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._playLock=!1,n._onend=e.onend?[{fn:e.onend}]:[],n._onfade=e.onfade?[{fn:e.onfade}]:[],n._onload=e.onload?[{fn:e.onload}]:[],n._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],n._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],n._onpause=e.onpause?[{fn:e.onpause}]:[],n._onplay=e.onplay?[{fn:e.onplay}]:[],n._onstop=e.onstop?[{fn:e.onstop}]:[],n._onmute=e.onmute?[{fn:e.onmute}]:[],n._onvolume=e.onvolume?[{fn:e.onvolume}]:[],n._onrate=e.onrate?[{fn:e.onrate}]:[],n._onseek=e.onseek?[{fn:e.onseek}]:[],n._onunlock=e.onunlock?[{fn:e.onunlock}]:[],n._onresume=[],n._webAudio=o.usingWebAudio&&!n._html5,typeof o.ctx<"u"&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&"none"!==n._preload&&n.load(),n},load:function(){var e=this,n=null;if(o.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var i,l;if(e._format&&e._format[r])i=e._format[r];else{if("string"!=typeof(l=e._src[r])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(l))||(i=/\.([^.]+)$/.exec(l.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&o.codecs(i)){n=e._src[r];break}}if(n)return e._src=n,e._state="loading","https:"===window.location.protocol&&"http:"===n.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new t(e),e._webAudio&&h(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,n){var r=this,i=null;if("number"==typeof e)i=e,e=null;else{if("string"==typeof e&&"loaded"===r._state&&!r._sprite[e])return null;if(typeof e>"u"&&(e="__default",!r._playLock)){for(var l=0,u=0;u<r._sounds.length;u++)r._sounds[u]._paused&&!r._sounds[u]._ended&&(l++,i=r._sounds[u]._id);1===l?e=null:i=null}}var a=i?r._soundById(i):r._inactiveSound();if(!a)return null;if(i&&!e&&(e=a._sprite||"__default"),"loaded"!==r._state){a._sprite=e,a._ended=!1;var m=a._id;return r._queue.push({event:"play",action:function(){r.play(m)}}),m}if(i&&!a._paused)return n||r._loadQueue("play"),a._id;r._webAudio&&o._autoResume();var A=Math.max(0,a._seek>0?a._seek:r._sprite[e][0]/1e3),x=Math.max(0,(r._sprite[e][0]+r._sprite[e][1])/1e3-A),M=1e3*x/Math.abs(a._rate),P=r._sprite[e][0]/1e3,R=(r._sprite[e][0]+r._sprite[e][1])/1e3;a._sprite=e,a._ended=!1;var B=function(){a._paused=!1,a._seek=A,a._start=P,a._stop=R,a._loop=!(!a._loop&&!r._sprite[e][2])};if(!(A>=R)){var b=a._node;if(r._webAudio){var Q=function(){r._playLock=!1,B(),r._refreshBuffer(a),b.gain.setValueAtTime(a._muted||r._muted?0:a._volume,o.ctx.currentTime),a._playStart=o.ctx.currentTime,typeof b.bufferSource.start>"u"?b.bufferSource.noteGrainOn(0,A,a._loop?86400:x):b.bufferSource.start(0,A,a._loop?86400:x),M!==1/0&&(r._endTimers[a._id]=setTimeout(r._ended.bind(r,a),M)),n||setTimeout(function(){r._emit("play",a._id),r._loadQueue()},0)};"running"===o.state&&"interrupted"!==o.ctx.state?Q():(r._playLock=!0,r.once("resume",Q),r._clearTimer(a._id))}else{var D=function(){b.currentTime=A,b.muted=a._muted||r._muted||o._muted||b.muted,b.volume=a._volume*o.volume(),b.playbackRate=a._rate;try{var O=b.play();if(O&&typeof Promise<"u"&&(O instanceof Promise||"function"==typeof O.then)?(r._playLock=!0,B(),O.then(function(){r._playLock=!1,b._unlocked=!0,n?r._loadQueue():r._emit("play",a._id)}).catch(function(){r._playLock=!1,r._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0})):n||(r._playLock=!1,B(),r._emit("play",a._id)),b.playbackRate=a._rate,b.paused)return void r._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||a._loop?r._endTimers[a._id]=setTimeout(r._ended.bind(r,a),M):(r._endTimers[a._id]=function(){r._ended(a),b.removeEventListener("ended",r._endTimers[a._id],!1)},b.addEventListener("ended",r._endTimers[a._id],!1))}catch(q){r._emit("playerror",a._id,q)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===b.src&&(b.src=r._src,b.load());var V=window&&window.ejecta||!b.readyState&&o._navigator.isCocoonJS;if(b.readyState>=3||V)D();else{r._playLock=!0,r._state="loading";var H=function(){r._state="loaded",D(),b.removeEventListener(o._canPlayEvent,H,!1)};b.addEventListener(o._canPlayEvent,H,!1),r._clearTimer(a._id)}}return a._id}r._ended(a)},pause:function(e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"pause",action:function(){n.pause(e)}}),n;for(var r=n._getSoundIds(e),i=0;i<r.length;i++){n._clearTimer(r[i]);var l=n._soundById(r[i]);if(l&&!l._paused&&(l._seek=n.seek(r[i]),l._rateSeek=0,l._paused=!0,n._stopFade(r[i]),l._node))if(n._webAudio){if(!l._node.bufferSource)continue;typeof l._node.bufferSource.stop>"u"?l._node.bufferSource.noteOff(0):l._node.bufferSource.stop(0),n._cleanBuffer(l._node)}else(!isNaN(l._node.duration)||l._node.duration===1/0)&&l._node.pause();arguments[1]||n._emit("pause",l?l._id:null)}return n},stop:function(e,n){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"stop",action:function(){r.stop(e)}}),r;for(var i=r._getSoundIds(e),l=0;l<i.length;l++){r._clearTimer(i[l]);var u=r._soundById(i[l]);u&&(u._seek=u._start||0,u._rateSeek=0,u._paused=!0,u._ended=!0,r._stopFade(i[l]),u._node&&(r._webAudio?u._node.bufferSource&&(typeof u._node.bufferSource.stop>"u"?u._node.bufferSource.noteOff(0):u._node.bufferSource.stop(0),r._cleanBuffer(u._node)):(!isNaN(u._node.duration)||u._node.duration===1/0)&&(u._node.currentTime=u._start||0,u._node.pause(),u._node.duration===1/0&&r._clearSound(u._node))),n||r._emit("stop",u._id))}return r},mute:function(e,n){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(e,n)}}),r;if(typeof n>"u"){if("boolean"!=typeof e)return r._muted;r._muted=e}for(var i=r._getSoundIds(n),l=0;l<i.length;l++){var u=r._soundById(i[l]);u&&(u._muted=e,u._interval&&r._stopFade(u._id),r._webAudio&&u._node?u._node.gain.setValueAtTime(e?0:u._volume,o.ctx.currentTime):u._node&&(u._node.muted=!!o._muted||e),r._emit("mute",u._id))}return r},volume:function(){var r,i,a,e=this,n=arguments;if(0===n.length)return e._volume;if(1===n.length||2===n.length&&typeof n[1]>"u"?e._getSoundIds().indexOf(n[0])>=0?i=parseInt(n[0],10):r=parseFloat(n[0]):n.length>=2&&(r=parseFloat(n[0]),i=parseInt(n[1],10)),!(typeof r<"u"&&r>=0&&r<=1))return(a=i?e._soundById(i):e._sounds[0])?a._volume:0;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,n)}}),e;typeof i>"u"&&(e._volume=r),i=e._getSoundIds(i);for(var m=0;m<i.length;m++)(a=e._soundById(i[m]))&&(a._volume=r,n[2]||e._stopFade(i[m]),e._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(r,o.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=r*o.volume()),e._emit("volume",a._id));return e},fade:function(e,n,r,i){var l=this;if("loaded"!==l._state||l._playLock)return l._queue.push({event:"fade",action:function(){l.fade(e,n,r,i)}}),l;e=Math.min(Math.max(0,parseFloat(e)),1),n=Math.min(Math.max(0,parseFloat(n)),1),r=parseFloat(r),l.volume(e,i);for(var u=l._getSoundIds(i),a=0;a<u.length;a++){var m=l._soundById(u[a]);if(m){if(i||l._stopFade(u[a]),l._webAudio&&!m._muted){var A=o.ctx.currentTime,x=A+r/1e3;m._volume=e,m._node.gain.setValueAtTime(e,A),m._node.gain.linearRampToValueAtTime(n,x)}l._startFadeInterval(m,e,n,r,u[a],typeof i>"u")}}return l},_startFadeInterval:function(e,n,r,i,l,u){var a=this,m=n,A=r-n,x=Math.abs(A/.01),M=Math.max(4,x>0?i/x:i),P=Date.now();e._fadeTo=r,e._interval=setInterval(function(){var R=(Date.now()-P)/i;P=Date.now(),m+=A*R,m=Math.round(100*m)/100,m=A<0?Math.max(r,m):Math.min(r,m),a._webAudio?e._volume=m:a.volume(m,e._id,!0),u&&(a._volume=m),(r<n&&m<=r||r>n&&m>=r)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(r,e._id),a._emit("fade",e._id))},M)},_stopFade:function(e){var n=this,r=n._soundById(e);return r&&r._interval&&(n._webAudio&&r._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(r._interval),r._interval=null,n.volume(r._fadeTo,e),r._fadeTo=null,n._emit("fade",e)),n},loop:function(){var r,i,l,e=this,n=arguments;if(0===n.length)return e._loop;if(1===n.length){if("boolean"!=typeof n[0])return!!(l=e._soundById(parseInt(n[0],10)))&&l._loop;e._loop=r=n[0]}else 2===n.length&&(r=n[0],i=parseInt(n[1],10));for(var u=e._getSoundIds(i),a=0;a<u.length;a++)(l=e._soundById(u[a]))&&(l._loop=r,e._webAudio&&l._node&&l._node.bufferSource&&(l._node.bufferSource.loop=r,r&&(l._node.bufferSource.loopStart=l._start||0,l._node.bufferSource.loopEnd=l._stop,e.playing(u[a])&&(e.pause(u[a],!0),e.play(u[a],!0)))));return e},rate:function(){var r,i,a,e=this,n=arguments;if(0===n.length?i=e._sounds[0]._id:1===n.length?e._getSoundIds().indexOf(n[0])>=0?i=parseInt(n[0],10):r=parseFloat(n[0]):2===n.length&&(r=parseFloat(n[0]),i=parseInt(n[1],10)),"number"!=typeof r)return(a=e._soundById(i))?a._rate:e._rate;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,n)}}),e;typeof i>"u"&&(e._rate=r),i=e._getSoundIds(i);for(var m=0;m<i.length;m++)if(a=e._soundById(i[m])){e.playing(i[m])&&(a._rateSeek=e.seek(i[m]),a._playStart=e._webAudio?o.ctx.currentTime:a._playStart),a._rate=r,e._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.setValueAtTime(r,o.ctx.currentTime):a._node&&(a._node.playbackRate=r);var A=e.seek(i[m]),M=1e3*((e._sprite[a._sprite][0]+e._sprite[a._sprite][1])/1e3-A)/Math.abs(a._rate);(e._endTimers[i[m]]||!a._paused)&&(e._clearTimer(i[m]),e._endTimers[i[m]]=setTimeout(e._ended.bind(e,a),M)),e._emit("rate",a._id)}return e},seek:function(){var r,i,e=this,n=arguments;if(0===n.length?e._sounds.length&&(i=e._sounds[0]._id):1===n.length?e._getSoundIds().indexOf(n[0])>=0?i=parseInt(n[0],10):e._sounds.length&&(i=e._sounds[0]._id,r=parseFloat(n[0])):2===n.length&&(r=parseFloat(n[0]),i=parseInt(n[1],10)),typeof i>"u")return 0;if("number"==typeof r&&("loaded"!==e._state||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,n)}}),e;var a=e._soundById(i);if(a){if(!("number"==typeof r&&r>=0)){if(e._webAudio){var M=e.playing(i)?o.ctx.currentTime-a._playStart:0;return a._seek+((a._rateSeek?a._rateSeek-a._seek:0)+M*Math.abs(a._rate))}return a._node.currentTime}var m=e.playing(i);m&&e.pause(i,!0),a._seek=r,a._ended=!1,e._clearTimer(i),!e._webAudio&&a._node&&!isNaN(a._node.duration)&&(a._node.currentTime=r);var A=function(){m&&e.play(i,!0),e._emit("seek",i)};if(m&&!e._webAudio){var x=function(){e._playLock?setTimeout(x,0):A()};setTimeout(x,0)}else A()}return e},playing:function(e){var n=this;if("number"==typeof e){var r=n._soundById(e);return!!r&&!r._paused}for(var i=0;i<n._sounds.length;i++)if(!n._sounds[i]._paused)return!0;return!1},duration:function(e){var n=this,r=n._duration,i=n._soundById(e);return i&&(r=n._sprite[i._sprite][1]/1e3),r},state:function(){return this._state},unload:function(){for(var e=this,n=e._sounds,r=0;r<n.length;r++)n[r]._paused||e.stop(n[r]._id),e._webAudio||(e._clearSound(n[r]._node),n[r]._node.removeEventListener("error",n[r]._errorFn,!1),n[r]._node.removeEventListener(o._canPlayEvent,n[r]._loadFn,!1),n[r]._node.removeEventListener("ended",n[r]._endFn,!1),o._releaseHtml5Audio(n[r]._node)),delete n[r]._node,e._clearTimer(n[r]._id);var i=o._howls.indexOf(e);i>=0&&o._howls.splice(i,1);var l=!0;for(r=0;r<o._howls.length;r++)if(o._howls[r]._src===e._src||e._src.indexOf(o._howls[r]._src)>=0){l=!1;break}return v&&l&&delete v[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,n,r,i){return"function"==typeof n&&this["_on"+e].push(i?{id:r,fn:n,once:i}:{id:r,fn:n}),this},off:function(e,n,r){var i=this,l=i["_on"+e],u=0;if("number"==typeof n&&(r=n,n=null),n||r)for(u=0;u<l.length;u++){var a=r===l[u].id;if(n===l[u].fn&&a||!n&&a){l.splice(u,1);break}}else if(e)i["_on"+e]=[];else{var m=Object.keys(i);for(u=0;u<m.length;u++)0===m[u].indexOf("_on")&&Array.isArray(i[m[u]])&&(i[m[u]]=[])}return i},once:function(e,n,r){return this.on(e,n,r,1),this},_emit:function(e,n,r){for(var i=this,l=i["_on"+e],u=l.length-1;u>=0;u--)(!l[u].id||l[u].id===n||"load"===e)&&(setTimeout(function(a){a.call(this,n,r)}.bind(i,l[u].fn),0),l[u].once&&i.off(e,l[u].fn,l[u].id));return i._loadQueue(e),i},_loadQueue:function(e){var n=this;if(n._queue.length>0){var r=n._queue[0];r.event===e&&(n._queue.shift(),n._loadQueue()),e||r.action()}return n},_ended:function(e){var n=this,r=e._sprite;if(!n._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(n._ended.bind(n,e),100),n;var i=!(!e._loop&&!n._sprite[r][2]);if(n._emit("end",e._id),!n._webAudio&&i&&n.stop(e._id,!0).play(e._id),n._webAudio&&i){n._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var l=1e3*(e._stop-e._start)/Math.abs(e._rate);n._endTimers[e._id]=setTimeout(n._ended.bind(n,e),l)}return n._webAudio&&!i&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,n._clearTimer(e._id),n._cleanBuffer(e._node),o._autoSuspend()),!n._webAudio&&!i&&n.stop(e._id,!0),n},_clearTimer:function(e){var n=this;if(n._endTimers[e]){if("function"!=typeof n._endTimers[e])clearTimeout(n._endTimers[e]);else{var r=n._soundById(e);r&&r._node&&r._node.removeEventListener("ended",n._endTimers[e],!1)}delete n._endTimers[e]}return n},_soundById:function(e){for(var n=this,r=0;r<n._sounds.length;r++)if(e===n._sounds[r]._id)return n._sounds[r];return null},_inactiveSound:function(){var e=this;e._drain();for(var n=0;n<e._sounds.length;n++)if(e._sounds[n]._ended)return e._sounds[n].reset();return new t(e)},_drain:function(){var e=this,n=e._pool,r=0,i=0;if(!(e._sounds.length<n)){for(i=0;i<e._sounds.length;i++)e._sounds[i]._ended&&r++;for(i=e._sounds.length-1;i>=0;i--){if(r<=n)return;e._sounds[i]._ended&&(e._webAudio&&e._sounds[i]._node&&e._sounds[i]._node.disconnect(0),e._sounds.splice(i,1),r--)}}},_getSoundIds:function(e){if(typeof e>"u"){for(var r=[],i=0;i<this._sounds.length;i++)r.push(this._sounds[i]._id);return r}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=v[this._src],e._node.bufferSource.connect(e._panner?e._panner:e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,o.ctx.currentTime),this},_cleanBuffer:function(e){var r=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return this;if(o._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),r))try{e.bufferSource.buffer=o._scratchBuffer}catch{}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var t=function(e){this._parent=e,this.init()};t.prototype={init:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++o._counter,n._sounds.push(e),e.create(),e},create:function(){var e=this,n=e._parent,r=o._muted||e._muted||e._parent._muted?0:e._volume;return n._webAudio?(e._node=typeof o.ctx.createGain>"u"?o.ctx.createGainNode():o.ctx.createGain(),e._node.gain.setValueAtTime(r,o.ctx.currentTime),e._node.paused=!0,e._node.connect(o.masterGain)):o.noAudio||(e._node=o._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(o._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=n._src,e._node.preload=!0===n._preload?"auto":n._preload,e._node.volume=r*o.volume(),e._node.load()),e},reset:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++o._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,n=e._parent;n._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(n._sprite).length&&(n._sprite={__default:[0,1e3*n._duration]}),"loaded"!==n._state&&(n._state="loaded",n._emit("load"),n._loadQueue()),e._node.removeEventListener(o._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,n=e._parent;n._duration===1/0&&(n._duration=Math.ceil(10*e._node.duration)/10,n._sprite.__default[1]===1/0&&(n._sprite.__default[1]=1e3*n._duration),n._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var v={},h=function(e){var n=e._src;if(v[n])return e._duration=v[n].duration,void p(e);if(/^data:[^;]+;base64,/.test(n)){for(var r=atob(n.split(",")[1]),i=new Uint8Array(r.length),l=0;l<r.length;++l)i[l]=r.charCodeAt(l);g(i.buffer,e)}else{var u=new XMLHttpRequest;u.open(e._xhr.method,n,!0),u.withCredentials=e._xhr.withCredentials,u.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(a){u.setRequestHeader(a,e._xhr.headers[a])}),u.onload=function(){var a=(u.status+"")[0];"0"===a||"2"===a||"3"===a?g(u.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+u.status+".")},u.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete v[n],e.load())},T(u)}},T=function(e){try{e.send()}catch{e.onerror()}},g=function(e,n){var r=function(){n._emit("loaderror",null,"Decoding audio data failed.")},i=function(l){l&&n._sounds.length>0?(v[n._src]=l,p(n,l)):r()};typeof Promise<"u"&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(e).then(i).catch(r):o.ctx.decodeAudioData(e,i,r)},p=function(e,n){n&&!e._duration&&(e._duration=n.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},k=function(){if(o.usingWebAudio){try{typeof AudioContext<"u"?o.ctx=new AudioContext:typeof webkitAudioContext<"u"?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch{o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),n=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=n?parseInt(n[1],10):null;if(e&&r&&r<9){var i=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!i&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=typeof o.ctx.createGain>"u"?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};void 0!==(F=function(){return{Howler:o,Howl:s}}.apply(E,[]))&&(X.exports=F),E.Howler=o,E.Howl=s,typeof global<"u"?(global.HowlerGlobal=I,global.Howler=o,global.Howl=s,global.Sound=t):typeof window<"u"&&(window.HowlerGlobal=I,window.Howler=o,window.Howl=s,window.Sound=t)}(),function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(o){var s=this;if(!s.ctx||!s.ctx.listener)return s;for(var t=s._howls.length-1;t>=0;t--)s._howls[t].stereo(o);return s},HowlerGlobal.prototype.pos=function(o,s,t){var v=this;return v.ctx&&v.ctx.listener?"number"!=typeof o?v._pos:(v._pos=[o,s="number"!=typeof s?v._pos[1]:s,t="number"!=typeof t?v._pos[2]:t],typeof v.ctx.listener.positionX<"u"?(v.ctx.listener.positionX.setTargetAtTime(v._pos[0],Howler.ctx.currentTime,.1),v.ctx.listener.positionY.setTargetAtTime(v._pos[1],Howler.ctx.currentTime,.1),v.ctx.listener.positionZ.setTargetAtTime(v._pos[2],Howler.ctx.currentTime,.1)):v.ctx.listener.setPosition(v._pos[0],v._pos[1],v._pos[2]),v):v},HowlerGlobal.prototype.orientation=function(o,s,t,v,h,T){var g=this;if(!g.ctx||!g.ctx.listener)return g;var p=g._orientation;return"number"!=typeof o?p:(g._orientation=[o,s="number"!=typeof s?p[1]:s,t="number"!=typeof t?p[2]:t,v="number"!=typeof v?p[3]:v,h="number"!=typeof h?p[4]:h,T="number"!=typeof T?p[5]:T],typeof g.ctx.listener.forwardX<"u"?(g.ctx.listener.forwardX.setTargetAtTime(o,Howler.ctx.currentTime,.1),g.ctx.listener.forwardY.setTargetAtTime(s,Howler.ctx.currentTime,.1),g.ctx.listener.forwardZ.setTargetAtTime(t,Howler.ctx.currentTime,.1),g.ctx.listener.upX.setTargetAtTime(v,Howler.ctx.currentTime,.1),g.ctx.listener.upY.setTargetAtTime(h,Howler.ctx.currentTime,.1),g.ctx.listener.upZ.setTargetAtTime(T,Howler.ctx.currentTime,.1)):g.ctx.listener.setOrientation(o,s,t,v,h,T),g)},Howl.prototype.init=function(o){return function(s){var t=this;return t._orientation=s.orientation||[1,0,0],t._stereo=s.stereo||null,t._pos=s.pos||null,t._pannerAttr={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:360,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:360,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:0,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:"inverse",maxDistance:typeof s.maxDistance<"u"?s.maxDistance:1e4,panningModel:typeof s.panningModel<"u"?s.panningModel:"HRTF",refDistance:typeof s.refDistance<"u"?s.refDistance:1,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:1},t._onstereo=s.onstereo?[{fn:s.onstereo}]:[],t._onpos=s.onpos?[{fn:s.onpos}]:[],t._onorientation=s.onorientation?[{fn:s.onorientation}]:[],o.call(this,s)}}(Howl.prototype.init),Howl.prototype.stereo=function(o,s){var t=this;if(!t._webAudio)return t;if("loaded"!==t._state)return t._queue.push({event:"stereo",action:function(){t.stereo(o,s)}}),t;var v=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof s>"u"){if("number"!=typeof o)return t._stereo;t._stereo=o,t._pos=[o,0,0]}for(var h=t._getSoundIds(s),T=0;T<h.length;T++){var g=t._soundById(h[T]);if(g){if("number"!=typeof o)return g._stereo;g._stereo=o,g._pos=[o,0,0],g._node&&(g._pannerAttr.panningModel="equalpower",(!g._panner||!g._panner.pan)&&I(g,v),"spatial"===v?typeof g._panner.positionX<"u"?(g._panner.positionX.setValueAtTime(o,Howler.ctx.currentTime),g._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),g._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):g._panner.setPosition(o,0,0):g._panner.pan.setValueAtTime(o,Howler.ctx.currentTime)),t._emit("stereo",g._id)}}return t},Howl.prototype.pos=function(o,s,t,v){var h=this;if(!h._webAudio)return h;if("loaded"!==h._state)return h._queue.push({event:"pos",action:function(){h.pos(o,s,t,v)}}),h;if(s="number"!=typeof s?0:s,t="number"!=typeof t?-.5:t,typeof v>"u"){if("number"!=typeof o)return h._pos;h._pos=[o,s,t]}for(var T=h._getSoundIds(v),g=0;g<T.length;g++){var p=h._soundById(T[g]);if(p){if("number"!=typeof o)return p._pos;p._pos=[o,s,t],p._node&&((!p._panner||p._panner.pan)&&I(p,"spatial"),typeof p._panner.positionX<"u"?(p._panner.positionX.setValueAtTime(o,Howler.ctx.currentTime),p._panner.positionY.setValueAtTime(s,Howler.ctx.currentTime),p._panner.positionZ.setValueAtTime(t,Howler.ctx.currentTime)):p._panner.setPosition(o,s,t)),h._emit("pos",p._id)}}return h},Howl.prototype.orientation=function(o,s,t,v){var h=this;if(!h._webAudio)return h;if("loaded"!==h._state)return h._queue.push({event:"orientation",action:function(){h.orientation(o,s,t,v)}}),h;if(s="number"!=typeof s?h._orientation[1]:s,t="number"!=typeof t?h._orientation[2]:t,typeof v>"u"){if("number"!=typeof o)return h._orientation;h._orientation=[o,s,t]}for(var T=h._getSoundIds(v),g=0;g<T.length;g++){var p=h._soundById(T[g]);if(p){if("number"!=typeof o)return p._orientation;p._orientation=[o,s,t],p._node&&(p._panner||(p._pos||(p._pos=h._pos||[0,0,-.5]),I(p,"spatial")),typeof p._panner.orientationX<"u"?(p._panner.orientationX.setValueAtTime(o,Howler.ctx.currentTime),p._panner.orientationY.setValueAtTime(s,Howler.ctx.currentTime),p._panner.orientationZ.setValueAtTime(t,Howler.ctx.currentTime)):p._panner.setOrientation(o,s,t)),h._emit("orientation",p._id)}}return h},Howl.prototype.pannerAttr=function(){var t,v,h,o=this,s=arguments;if(!o._webAudio)return o;if(0===s.length)return o._pannerAttr;if(1===s.length){if("object"!=typeof s[0])return(h=o._soundById(parseInt(s[0],10)))?h._pannerAttr:o._pannerAttr;t=s[0],typeof v>"u"&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),o._pannerAttr={coneInnerAngle:typeof t.pannerAttr.coneInnerAngle<"u"?t.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:typeof t.pannerAttr.coneOuterAngle<"u"?t.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:typeof t.pannerAttr.coneOuterGain<"u"?t.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:typeof t.pannerAttr.distanceModel<"u"?t.pannerAttr.distanceModel:o._distanceModel,maxDistance:typeof t.pannerAttr.maxDistance<"u"?t.pannerAttr.maxDistance:o._maxDistance,refDistance:typeof t.pannerAttr.refDistance<"u"?t.pannerAttr.refDistance:o._refDistance,rolloffFactor:typeof t.pannerAttr.rolloffFactor<"u"?t.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:typeof t.pannerAttr.panningModel<"u"?t.pannerAttr.panningModel:o._panningModel})}else 2===s.length&&(t=s[0],v=parseInt(s[1],10));for(var T=o._getSoundIds(v),g=0;g<T.length;g++)if(h=o._soundById(T[g])){var p=h._pannerAttr;p={coneInnerAngle:typeof t.coneInnerAngle<"u"?t.coneInnerAngle:p.coneInnerAngle,coneOuterAngle:typeof t.coneOuterAngle<"u"?t.coneOuterAngle:p.coneOuterAngle,coneOuterGain:typeof t.coneOuterGain<"u"?t.coneOuterGain:p.coneOuterGain,distanceModel:typeof t.distanceModel<"u"?t.distanceModel:p.distanceModel,maxDistance:typeof t.maxDistance<"u"?t.maxDistance:p.maxDistance,refDistance:typeof t.refDistance<"u"?t.refDistance:p.refDistance,rolloffFactor:typeof t.rolloffFactor<"u"?t.rolloffFactor:p.rolloffFactor,panningModel:typeof t.panningModel<"u"?t.panningModel:p.panningModel};var k=h._panner;k||(h._pos||(h._pos=o._pos||[0,0,-.5]),I(h,"spatial"),k=h._panner),k.coneInnerAngle=p.coneInnerAngle,k.coneOuterAngle=p.coneOuterAngle,k.coneOuterGain=p.coneOuterGain,k.distanceModel=p.distanceModel,k.maxDistance=p.maxDistance,k.refDistance=p.refDistance,k.rolloffFactor=p.rolloffFactor,k.panningModel=p.panningModel}return o},Sound.prototype.init=function(o){return function(){var s=this,t=s._parent;s._orientation=t._orientation,s._stereo=t._stereo,s._pos=t._pos,s._pannerAttr=t._pannerAttr,o.call(this),s._stereo?t.stereo(s._stereo):s._pos&&t.pos(s._pos[0],s._pos[1],s._pos[2],s._id)}}(Sound.prototype.init),Sound.prototype.reset=function(o){return function(){var s=this,t=s._parent;return s._orientation=t._orientation,s._stereo=t._stereo,s._pos=t._pos,s._pannerAttr=t._pannerAttr,s._stereo?t.stereo(s._stereo):s._pos?t.pos(s._pos[0],s._pos[1],s._pos[2],s._id):s._panner&&(s._panner.disconnect(0),s._panner=void 0,t._refreshBuffer(s)),o.call(this)}}(Sound.prototype.reset);var I=function(o,s){"spatial"===(s=s||"spatial")?(o._panner=Howler.ctx.createPanner(),o._panner.coneInnerAngle=o._pannerAttr.coneInnerAngle,o._panner.coneOuterAngle=o._pannerAttr.coneOuterAngle,o._panner.coneOuterGain=o._pannerAttr.coneOuterGain,o._panner.distanceModel=o._pannerAttr.distanceModel,o._panner.maxDistance=o._pannerAttr.maxDistance,o._panner.refDistance=o._pannerAttr.refDistance,o._panner.rolloffFactor=o._pannerAttr.rolloffFactor,o._panner.panningModel=o._pannerAttr.panningModel,typeof o._panner.positionX<"u"?(o._panner.positionX.setValueAtTime(o._pos[0],Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(o._pos[1],Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(o._pos[2],Howler.ctx.currentTime)):o._panner.setPosition(o._pos[0],o._pos[1],o._pos[2]),typeof o._panner.orientationX<"u"?(o._panner.orientationX.setValueAtTime(o._orientation[0],Howler.ctx.currentTime),o._panner.orientationY.setValueAtTime(o._orientation[1],Howler.ctx.currentTime),o._panner.orientationZ.setValueAtTime(o._orientation[2],Howler.ctx.currentTime)):o._panner.setOrientation(o._orientation[0],o._orientation[1],o._orientation[2])):(o._panner=Howler.ctx.createStereoPanner(),o._panner.pan.setValueAtTime(o._stereo,Howler.ctx.currentTime)),o._panner.connect(o._node),o._paused||o._parent.pause(o._id,!0).play(o._id,!0)}}()}}]);